{"version":3,"sources":["webpack:///src/pages/dataPages/dutyRecord/index.vue","webpack:///./src/pages/dataPages/dutyRecord/index.vue?2df1","webpack:///./src/pages/dataPages/dutyRecord/index.vue"],"names":["dutyRecord","localStorage","getItem","components","baseTable","baseDialog","data","loading","screensign","totalState","buttonarr","type","text","num","totalCount","tableData","tableThead","name","prop","page","FireUnitId","DutyStatus","SkipCount","MaxResultCount","dutyInfoData","amr","Object","nowMoth_duty","arr","created","this","GetDutylist","GetDutyStateTotal","mounted","methods","screen","state","_this","fireUnitId","$axios","get","$api","params","then","res","console","log","result","normalCount","greenFaultCount","redFaultCount","catch","err","_this2","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","items","next","done","value","creationTime","deal","dutyStatus","return","_res$data$result","str","split","str2","showdetails","item","$refs","dutyDetailsDialog","dialogVisible","GetDutyInfo","dutyId","_this3","dutyPhtosPath","x","length","$URL","dutyPhotosBase64","i","problemVoiceUrl","BenzAMRRecorder","__webpack_require__","initWithUrl","problemPhtosPath","y","playVioce","play","onEnded","prev_next","dataPages_dutyRecord","render","_vm","_h","$createElement","_c","_self","staticClass","_l","key","attrs","round","plain","on","click","$event","_e","_v","_s","directives","rawName","expression","element-loading-text","element-loading-spinner","element-loading-background","pageSize","specailText","pageChange","ref","title","dutyUserName","status","images","img","Imgindex","staticStyle","width","height","src","fit","problemRemark","alt","voiceLength","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/19.89b2ab2b4f047016df4e.js","sourcesContent":["<style lang=\"less\">\r\n.dutyRecord{\r\n    .dutyDetailsDialog{\r\n        width: 100%;\r\n        p{\r\n            line-height: 3;\r\n            color: white;\r\n            span{\r\n                display: inline-block;\r\n                &.title{\r\n                    width: 200px;\r\n                    text-align: right;\r\n                    font-weight: bold;\r\n                }\r\n                \r\n            }\r\n        }\r\n        .imgBox{\r\n\r\n            .viewer{\r\n                display: flex;\r\n                img{\r\n                    margin-right: 50px;\r\n                }\r\n            }\r\n        }\r\n        .vioceUrl{\r\n            margin: 20px 0px;\r\n            width: 80px;\r\n            height: 30px;\r\n            border-radius: 10px;\r\n            background: rgb(84, 185, 84);\r\n            display: flex;\r\n            align-items: center;\r\n            color: white;\r\n            padding-left: 10px;\r\n            cursor: pointer;\r\n        }\r\n        .display{\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n    }\r\n}\r\n</style>\r\n<template>\r\n    <div class=\"dutyRecord\">\r\n        <div class=\"topStatus\">\r\n            <el-button\r\n                v-for=\"item in buttonarr\"\r\n                :key=\"item.text\"\r\n                round \r\n                plain\r\n                :type=\"item.type\"\r\n                @click=\"screen(item.text)\"\r\n            >\r\n                <i v-if=\"screensign == item.text\" class=\"el-icon-check  el-icon--right\"></i>\r\n                {{item.text}}\r\n                {{item.num}}\r\n            </el-button>\r\n        </div>\r\n        <baseTable\r\n            v-loading=\"loading\"\r\n            element-loading-text=\"拼命加载中\"\r\n            element-loading-spinner=\"el-icon-loading\"\r\n            element-loading-background=\"rgba(0, 0, 0, 0.8)\"\r\n            :tableThead=\"tableThead\"\r\n            :tableData=\"tableData\"\r\n            :totalCount='totalCount'\r\n            :pageSize=\"10\"\r\n            specailText=\"查看值班记录\"\r\n            @showdetails=\"showdetails\"\r\n            @pageChange=\"prev_next\"\r\n        ></baseTable>\r\n\r\n\r\n        <!-- 弹窗 -->\r\n\r\n        <baseDialog ref=\"dutyDetailsDialog\" title=\"值班记录详情\">\r\n            <div \r\n                class=\"dutyDetailsDialog\"\r\n                v-loading=\"loading\"\r\n                element-loading-text=\"拼命加载中\"\r\n                element-loading-spinner=\"el-icon-loading\"\r\n                element-loading-background=\"rgba(0, 0, 0, 0.8)\"\r\n            >\r\n                <p>\r\n                    <span class=\"title\">提交时间：</span>\r\n                    {{dutyInfoData.creationTime}}\r\n                </p>\r\n                <p>\r\n                    <span class=\"title\">值班人员：</span>\r\n                    {{dutyInfoData.dutyUserName}}\r\n                </p>\r\n                <p>\r\n                    <span class=\"title\">发现问题：</span>\r\n                    <span v-if=\"dutyInfoData.status  == 1\" class=\"content\">\r\n                        未发现问题状态正常\r\n                    </span>\r\n                    <span v-if=\"dutyInfoData.status  == 2\" class=\"content\">\r\n                        发现问题（已现场解决）\r\n                    </span>\r\n                    <span v-if=\"dutyInfoData.status  == 3\" class=\"content\">\r\n                       发现问题（未解决）\r\n                    </span>\r\n\r\n                </p>\r\n                <div class=\"display\">\r\n                    <p>\r\n                        <span class=\"title\">值班记录：</span>\r\n                    </p>\r\n\r\n                    <div class=\"imgBox\">\r\n                        <viewer class=\"viewer\" v-if=\"dutyInfoData.dutyPhtosPath\"  :images=\"dutyInfoData.dutyPhtosPath\">\r\n                            <img\r\n                                v-for=\"(img,Imgindex) in dutyInfoData.dutyPhtosPath\"\r\n                                :key=\"Imgindex\"\r\n                                style=\"width: 100px; height: 100px\"\r\n                                :src=\"img\"\r\n                                fit=\"cover\"\r\n                            ><img>\r\n                        \r\n                        </viewer>\r\n                        <p v-else>暂无值班记录</p>\r\n                    </div>\r\n                   \r\n                </div>\r\n                <!--  -->\r\n                <div class=\"display\">\r\n                    <p>\r\n                        <span class=\"title\">情况描述：</span>\r\n                    </p>\r\n                    <p  v-if=\"dutyInfoData.problemRemark\">\r\n                        {{dutyInfoData.problemRemark}}\r\n                    </p>\r\n                    <div class=\"vioceUrl\"  @click=\"playVioce\" v-if=\"dutyInfoData.problemVoiceUrl\">\r\n                        <img src=\"../../../assets/image/index/voice.png\" alt=\"\">\r\n                        <span>{{dutyInfoData.voiceLength}}\"</span>\r\n                    </div>\r\n               \r\n                </div>\r\n                <div class=\"display\">\r\n                    <p>\r\n                        <span class=\"title\">现场问题图片：</span>\r\n                    </p>\r\n                    <div class=\"imgBox\">\r\n                        <viewer class=\"viewer\" v-if=\"dutyInfoData.problemPhtosPath\"  :images=\"dutyInfoData.problemPhtosPath\">\r\n                            <img\r\n                                v-for=\"(img,Imgindex) in dutyInfoData.problemPhtosPath\"\r\n                                :key=\"Imgindex\"\r\n                                style=\"width: 100px; height: 100px\"\r\n                                :src=\"img\"\r\n                                fit=\"cover\"\r\n                            ><img>\r\n                        \r\n                        </viewer>\r\n                        <p v-else>暂无现场照片</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </baseDialog>\r\n    </div>\r\n</template>\r\n<script>\r\nlet FireUnitId = localStorage.getItem('fireUnitID')\r\nimport baseTable from '../../../components/baseTable/index'\r\nimport baseDialog from '../../../components/baseDialog/index'\r\nexport default {\r\n    components:{\r\n        baseTable,\r\n        baseDialog\r\n    },\r\n    data(){\r\n        return{\r\n            loading:false,\r\n            screensign:'全部',\r\n            totalState:[],//总的状态\r\n            buttonarr:[\r\n                {\r\n                    type:'info',\r\n                    text:'全部'\r\n                },\r\n                {\r\n                    type:'success',\r\n                    text:'正常',\r\n                    num:0\r\n                },\r\n                 {\r\n                    type:'success',\r\n                    text:'故障-已解决',\r\n                    num:0\r\n                },\r\n                {\r\n                    type:'warning',\r\n                    text:'故障-未解决',\r\n                    num:0\r\n                }\r\n            ],\r\n            totalCount:0,//列表总数\r\n            tableData:[],//\r\n            tableThead:[\r\n                {\r\n                    name:'提交时间',\r\n                    prop:'creationTime',\r\n                },\r\n                {\r\n                    name:'值班人员',\r\n                    prop:'dutyUserName',\r\n                },\r\n                {\r\n                    name:'状态',\r\n                    prop:'state',\r\n                },\r\n                {\r\n                    name:'操作'\r\n                }\r\n            ],\r\n            page:{\r\n                FireUnitId :localStorage.getItem('fireUnitID'),\r\n                DutyStatus:0,\r\n                SkipCount:0,\r\n                MaxResultCount:10\r\n            },\r\n            dutyInfoData:[],//详情数据\r\n            amr:Object,//语音播放对象\r\n\r\n\r\n            nowMoth_duty:0,//当前月份\r\n            arr:[],//标记数据\r\n         \r\n        }\r\n    },\r\n    created(){\r\n        this.GetDutylist();\r\n        this.GetDutyStateTotal();\r\n    },\r\n     mounted(){\r\n\r\n    },\r\n    methods:{\r\n        //筛选\r\n        screen(state){\r\n            this.screensign = state\r\n            if(state == '全部'){\r\n                this.page.DutyStatus = 0\r\n            }else if(state == '正常'){\r\n                this.page.DutyStatus = 1\r\n            }else if(state == '故障-已解决'){\r\n                this.page.DutyStatus = 2\r\n            }else if(state == '故障-未解决'){\r\n                this.page.DutyStatus = 3\r\n            }\r\n            \r\n            this.page.SkipCount =0\r\n            this.GetDutylist();\r\n       \r\n        },\r\n        //获取值班记录状态统计\r\n        GetDutyStateTotal(){\r\n            let fireUnitId = localStorage.getItem('fireUnitID');\r\n            this.$axios.get(this.$api.GetDutyStateTotal,{params:{fireUnitId}}).then(res=>{\r\n                console.log(\"res\",res)\r\n                this.totalState = res.data.result;\r\n                this.buttonarr[1].num = res.data.result.normalCount\r\n                this.buttonarr[2].num = res.data.result.greenFaultCount\r\n                this.buttonarr[3].num = res.data.result.redFaultCount\r\n            }).catch(err=>{\r\n                console.log(\"err\",err)\r\n            })\r\n        },\r\n        //获取值班记录列表\r\n        GetDutylist(){\r\n            this.loading = true;\r\n            this.$axios.get(this.$api.GetDutylist,{params:this.page}).then(res=>{\r\n                console.log(\"打印值班记录列表\",res);\r\n                this.loading = false;\r\n                if(res.data.result.totalCount>0){\r\n                    for(let arr of res.data.result.items){\r\n                        arr.creationTime = this.deal( arr.creationTime);\r\n                        if( arr.dutyStatus == 1 ){\r\n                            arr.state = '正常'\r\n                        }else if( arr.dutyStatus == 2 ){\r\n                            arr.state = '故障-已解决'\r\n                        }else if( arr.dutyStatus == 3 ){\r\n                            arr.state = '故障-未解决'\r\n                        }\r\n                       \r\n                    }\r\n                    ({totalCount:this.totalCount,items:this.tableData}=res.data.result);\r\n                }\r\n            }).catch(err=>{\r\n                console.log(\"打印值班记录列表成功\",err)\r\n            })\r\n        },\r\n        //处理时间\r\n        deal(data){\r\n            var str = data.split('T');\r\n            var str2 = str[1].split(\".\")\r\n            var timestr = str[0] +\" \"+ str2[0]\r\n            return timestr;\r\n        },\r\n        //打开值班记录详情的弹窗\r\n        showdetails(item){\r\n            this.$refs.dutyDetailsDialog.dialogVisible = true;\r\n            this.GetDutyInfo(item.dutyId)\r\n        },\r\n        //获取值班记录详情\r\n        GetDutyInfo(dutyId){\r\n            this.loading = true;\r\n            this.$axios.get(this.$api.GetDutyInfo,{params:{dutyId}}).then(res=>{\r\n                //值班记录照片\r\n                if(res.data.result.dutyPhtosPath){\r\n                    for(let x=0;x< res.data.result.dutyPhtosPath.length;x++){\r\n                     res.data.result.dutyPhtosPath[x] = `${this.$URL}${res.data.result.dutyPhtosPath[x]}`\r\n                    }\r\n                }\r\n                if(res.data.result.dutyPhotosBase64){\r\n                    for(let i = 0;i<res.data.result.dutyPhotosBase64.length;i++){\r\n                        res.data.result.dutyPhotosBase64[i] = `data:image/jpeg;base64,${res.data.result.dutyPhotosBase64[i]}`\r\n                    }\r\n                }\r\n                //情况描述\r\n                if(res.data.result.problemVoiceUrl){\r\n                    res.data.result.problemVoiceUrl =  `${this.$URL}${res.data.result.problemVoiceUrl}`;\r\n                    let BenzAMRRecorder = require('benz-amr-recorder');\r\n                    this.amr = new BenzAMRRecorder();\r\n                    this.amr.initWithUrl( res.data.result.problemVoiceUrl);\r\n                }\r\n                \r\n                //现场图片\r\n                if(res.data.result.problemPhtosPath){\r\n                    for(let y=0;y< res.data.result.problemPhtosPath.length;y++){\r\n                     res.data.result.problemPhtosPath[y] = `${this.$URL}${res.data.result.problemPhtosPath[y]}`\r\n                    }\r\n                }\r\n                res.data.result.creationTime = this.deal(res.data.result.creationTime)\r\n\r\n                this.dutyInfoData = res.data.result\r\n                console.log(\"获取值班记录详情\",res)\r\n                this.loading = false;\r\n            }).catch(err=>{\r\n                console.log(\"获取值班记录详情失败\",err)\r\n            })\r\n        },\r\n\r\n        //点击播放语音\r\n        playVioce(){\r\n            this.amr.play();\r\n            this.amr.onEnded(function() {\r\n               console.log(\"播放完毕\")\r\n            })\r\n        },\r\n        //table上下页\r\n        prev_next(page){\r\n            this.page.SkipCount = (page-1)*this.page.MaxResultCount\r\n            this.GetDutylist();\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/dataPages/dutyRecord/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dutyRecord\"},[_c('div',{staticClass:\"topStatus\"},_vm._l((_vm.buttonarr),function(item){return _c('el-button',{key:item.text,attrs:{\"round\":\"\",\"plain\":\"\",\"type\":item.type},on:{\"click\":function($event){return _vm.screen(item.text)}}},[(_vm.screensign == item.text)?_c('i',{staticClass:\"el-icon-check  el-icon--right\"}):_vm._e(),_vm._v(\"\\n            \"+_vm._s(item.text)+\"\\n            \"+_vm._s(item.num)+\"\\n        \")])}),1),_vm._v(\" \"),_c('baseTable',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"element-loading-text\":\"拼命加载中\",\"element-loading-spinner\":\"el-icon-loading\",\"element-loading-background\":\"rgba(0, 0, 0, 0.8)\",\"tableThead\":_vm.tableThead,\"tableData\":_vm.tableData,\"totalCount\":_vm.totalCount,\"pageSize\":10,\"specailText\":\"查看值班记录\"},on:{\"showdetails\":_vm.showdetails,\"pageChange\":_vm.prev_next}}),_vm._v(\" \"),_c('baseDialog',{ref:\"dutyDetailsDialog\",attrs:{\"title\":\"值班记录详情\"}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"dutyDetailsDialog\",attrs:{\"element-loading-text\":\"拼命加载中\",\"element-loading-spinner\":\"el-icon-loading\",\"element-loading-background\":\"rgba(0, 0, 0, 0.8)\"}},[_c('p',[_c('span',{staticClass:\"title\"},[_vm._v(\"提交时间：\")]),_vm._v(\"\\n                \"+_vm._s(_vm.dutyInfoData.creationTime)+\"\\n            \")]),_vm._v(\" \"),_c('p',[_c('span',{staticClass:\"title\"},[_vm._v(\"值班人员：\")]),_vm._v(\"\\n                \"+_vm._s(_vm.dutyInfoData.dutyUserName)+\"\\n            \")]),_vm._v(\" \"),_c('p',[_c('span',{staticClass:\"title\"},[_vm._v(\"发现问题：\")]),_vm._v(\" \"),(_vm.dutyInfoData.status  == 1)?_c('span',{staticClass:\"content\"},[_vm._v(\"\\n                    未发现问题状态正常\\n                \")]):_vm._e(),_vm._v(\" \"),(_vm.dutyInfoData.status  == 2)?_c('span',{staticClass:\"content\"},[_vm._v(\"\\n                    发现问题（已现场解决）\\n                \")]):_vm._e(),_vm._v(\" \"),(_vm.dutyInfoData.status  == 3)?_c('span',{staticClass:\"content\"},[_vm._v(\"\\n                   发现问题（未解决）\\n                \")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"display\"},[_c('p',[_c('span',{staticClass:\"title\"},[_vm._v(\"值班记录：\")])]),_vm._v(\" \"),_c('div',{staticClass:\"imgBox\"},[(_vm.dutyInfoData.dutyPhtosPath)?_c('viewer',{staticClass:\"viewer\",attrs:{\"images\":_vm.dutyInfoData.dutyPhtosPath}},[_vm._l((_vm.dutyInfoData.dutyPhtosPath),function(img,Imgindex){return _c('img',{key:Imgindex,staticStyle:{\"width\":\"100px\",\"height\":\"100px\"},attrs:{\"src\":img,\"fit\":\"cover\"}})}),_c('img')],2):_c('p',[_vm._v(\"暂无值班记录\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"display\"},[_c('p',[_c('span',{staticClass:\"title\"},[_vm._v(\"情况描述：\")])]),_vm._v(\" \"),(_vm.dutyInfoData.problemRemark)?_c('p',[_vm._v(\"\\n                    \"+_vm._s(_vm.dutyInfoData.problemRemark)+\"\\n                \")]):_vm._e(),_vm._v(\" \"),(_vm.dutyInfoData.problemVoiceUrl)?_c('div',{staticClass:\"vioceUrl\",on:{\"click\":_vm.playVioce}},[_c('img',{attrs:{\"src\":require(\"../../../assets/image/index/voice.png\"),\"alt\":\"\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.dutyInfoData.voiceLength)+\"\\\"\")])]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"display\"},[_c('p',[_c('span',{staticClass:\"title\"},[_vm._v(\"现场问题图片：\")])]),_vm._v(\" \"),_c('div',{staticClass:\"imgBox\"},[(_vm.dutyInfoData.problemPhtosPath)?_c('viewer',{staticClass:\"viewer\",attrs:{\"images\":_vm.dutyInfoData.problemPhtosPath}},[_vm._l((_vm.dutyInfoData.problemPhtosPath),function(img,Imgindex){return _c('img',{key:Imgindex,staticStyle:{\"width\":\"100px\",\"height\":\"100px\"},attrs:{\"src\":img,\"fit\":\"cover\"}})}),_c('img')],2):_c('p',[_vm._v(\"暂无现场照片\")])],1)])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-78b8b614\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/dataPages/dutyRecord/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-78b8b614\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-78b8b614\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/dataPages/dutyRecord/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}