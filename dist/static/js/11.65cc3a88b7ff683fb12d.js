webpackJsonp([11],{"+TI4":function(a,t){a.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAA0CAYAAAAqunDVAAAAAXNSR0ICQMB9xQAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUATWljcm9zb2Z0IE9mZmljZX/tNXEAAAKXSURBVGje3ZorUMMwGMeRSCQSiZxEIpFwR2G4KQ45OcnUJvqQSCRycnJyhrsdx9IqrrJysrLka7M+k6yP9JGIv+jay/prku+V72w+n5+pJuEDakt0qZlo/GSg91Cm/aVZ9iYRWh3vaTqavOjoapBQ8GL4BacYZosV1JCDtcBjjHqHwi9yh7WrCcKS+2yit86h8Be9CZeSWJginO7ctw6lLb8vwj3SLkxe26r7rvSDD/rPNVn79D+3mrz4HsvmPXPQzN9boVCwDKKBRcNUHA8bIyFQxKoFncti/v7ZCIrMEGVwO+gFlAh8XC0o8Bl4AJ++/juEMJj3xpWgQmdqIq/P2SghH1xLaagGkUHX8l6Xf+cnodj7aAjal7KImQugbiHsESy7uAxxEM2E6s18N7WGlm2xofLGwZJmGWZmKxukSjhLKc2KUJDPDMjBVo9A7A0Nyu3VyYoQziJiKBKBy7z0juZ9EkPBhQpQjyb6iKHCIogKM2WhVTJTOJxXAgqHdwmUidaKQHlpKEcRqCAN5aoH1X65qysdOIZCQscbyUkvv4UiUOu085Uy5Sh8fFJpStfEVQiTpjEUyXgPskNBDJuN0mWLKoqlM5eWeozlmhmbmdLniy6+vFYwOUDI1CggdJckGs//tmMXXqLzWn/Qab1BtXojbjGz6IjlyKG4UGRvDb2OflShkMmrpcvijGdVj3KGEzpRiqpw9lzr0I1pDY3+03baaUcpqHB/9ZZrMX2kS9tHlc58AYzfZrDvCiacoVNAlVoO2t9j/I8DW4G35Oo3h0SHCF7nZptzviukjQfq1cRB+20DwbKv02XWqAWuxVhx3aSjTFxbXHMrKaw9TnwDIxw24HiMQO6YZjm6DzMyFd3IqFyrKegf+8W0n8MAiYAAAAAASUVORK5CYII="},"/tEp":function(a,t){},"0xvg":function(a,t){a.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAA1CAYAAADh5qNwAAAAAXNSR0ICQMB9xQAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUATWljcm9zb2Z0IE9mZmljZX/tNXEAAALWSURBVGje3VoreMIwEEZOIieRk5OTk5OTyMnJyklQSCQSOYlApAcCOYlE7cPQ1g2JZLk+06Zp0zZtk4ozW0ny5x65++9G8/l8NDRRvuDvfv/gEvLqAlgOkJm3s1dUDrEAfOPfUfC7v+32UUtQeLALIR8UyMYF+15VvB384CW4+/1T76DoTb/QQ5E6QArkdAEy7RwU3mhdrcgLHNE8WweF/oI+InkoRd/YhO47bgUU+k1g+0UHJLW04qBfFX9zptbxrBQULkgX9hrctgq50b3elYDChYIF7Xu3Iros8tUIVBjdbv1pJ3+fsuhY6EP5JgedaswRmSK98EqggijHBwXH7toEC/f1KLCJNCgattd9a0g2E5ECFUY6TQFBjn/BZzmo1jMF5eKhuwhBBdm1UYAiDVpCUHxw0M+PBOe6sakUq6WJmVoKfYuWPhwodLhUZNHf5NKRkBafHCisSk3SDP92wTUKGNFjOzbZ9GIJ66/Q9MjUjACRfXw5bS1iUJj5mggqB+SaAQVLiSTSBFCHGBRGjkH4FK2QE1CZR7evbFxFdcyYn30eiKburE8dBwhKOSGpg0+luTxTfSoqGn1QPlk/CE3BJskofHJ/EKCWiU/53LiRIHLLD6aMt0+mayoqFFluYlGcLGpWeghSpGzlaxg/kU26Ezo6wySlGVndtZUSpguZpccsQ7PzlZBN8pvQHH+uW23FM0nZZjhHZvJVsO4Bg8ykuHR9E1xOSxw7Kwblc4Bw1b/Eh7dK/Sn8gcRN9QnIqtdJFERDp1+TiwmW2j1f0YhBj28YyfOj6t15jkJrzxyLajkkiMoAVZqjCLr02eChGgzU8qFGEy9hl/Es6wflFTSRMWNPFOWUzSah+oNKuarWKpsqDoMsqo7wNJoiC0YS0syuslyO+k6TOcDGs3XhQ201Z6Qwi6E1nYKZP9VTmWPMHdlpTBHrE/5/jc0+1dOZg5ufRfkHecpTNkH4crMAAAAASUVORK5CYII="},"OQV/":function(a,t){a.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAA0CAYAAAAqunDVAAAAAXNSR0ICQMB9xQAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUATWljcm9zb2Z0IE9mZmljZX/tNXEAAAIvSURBVGje3ZorcIRADIZXnqxEVp6srDxZWYlEVp6sBFV5srISiURUcFVIJBKJRCJpMhOYHV7HY4HNil/d3LLfbJLNJhGe5wnTpHzBXyGsSAgb5KLuQvigSFJQ/wZyQM9aQuHGQFfYcAyqFij9E+IL1ng5HAo28QYbShaCDCmDdT92h4KPvpIpVRsK4d43hwJ/eSIfqXZUPNfv5pzOGW1/Z6BaBXz/ohQKzQAXPgioEQYjJVAU1SqN9LMKik5IJ6D6xNxFUHhnwAKljlAEZs+CwmgDf8x1BSKVeLVMhlqRGeytHK6Z00MoXf1oTkRsX66nDdKezc0Qk+hBKA3D9yRBMnwbhGIQHCadVjtJ5QhU+9ZnBwrfM5yh8NXQgcJUnzlUha+IBooycNZAZIKODOWYAAUu9C1DuSZAYVGngcJ03hCoWIYKDYHKZajUEKhKhmIfzvugIkOgChMDRdpAGZAi1Qrle4rlk+M+UGmSa+ImpEnXBopevIUBUOd2ls49WGR9j0SbeTJ760CRCWpbvJxgepfeGgWm7kyhkrESmcXxtNpt1U4xk+FFHDys0JJvcSmVdQqZYw0CFpexXBab2srRPXXyFzXdNI6GcV+3YxIU+Zdub62sz49m9XwJzNfohCyVIweH+hi6wpjJLR4OoSbC3uG+HOvvKhnjwXo1XdB7ZB7+kimzVSNwG0bHcM1EmcqxuLVRUtl43BYDjNhsCAgyGQrL9DueyFX1IKNxo6aof8N/3wkYTfMoAAAAAElFTkSuQmCC"},vnPI:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("BO1k"),r=e.n(o),i=e("Nn1j"),n=e("2t70"),s=e.n(n),l={components:{baseTable:i.a},data:function(){return{address:"",floor_Picture:"",iscloummark:!1,ismark:!1,imgmark1:!1,clounmIndex:0,specailText:"查看",tableThead:[{name:"部件地址",prop:"identify"},{name:"部件类型",prop:"typeName"},{name:"安装位置",prop:"location"},{name:"坐标",prop:"coordinateX",prop1:"coordinateY"},{name:"操作"}],tableData:[],totalCount:0,floorId:"",gFeatureLayer:"",gMap:"",havepoints:"",fea:"",markerArr:[],clounmMark:"",pinkDian:e("0xvg"),greenDian:e("+TI4"),redDian:e("OQV/")}},created:function(){this.floorId=this.$route.query.floor_id},mounted:function(){this.GetBitMapSet()},methods:{GetBitMapSet:function(){var a=this;this.$axios.get(this.$api.GetBitMapSet,{params:{floorId:this.floorId}}).then(function(t){console.log("res",t),a.address=t.data.result.architectureName+t.data.result.floorName,a.floor_Picture=t.data.result.floor_Picture,a.tableData=t.data.result.bitMapSetDetectorList,a.init(),a.getallmark()}).catch(function(a){console.log("err",a)})},init:function(){this.gMap=new s.a.Map("dv",{zoom:1080,cx:0,cy:0,zoomMax:6500,zoomMin:65,autoPan:!0,drawZoom:!0});var a=new s.a.Layer.Image("img",this.floor_Picture,{w:1080,h:720},{zIndex:1});this.gMap.addLayer(a),this.gFeatureLayer=new s.a.Layer.Feature("featureLayer",{zIndex:2,transparent:!0}),this.gMap.addLayer(this.gFeatureLayer)},getallmark:function(){var a=void 0,t=this.tableData.filter(function(a){return 0!=a.coordinateX&&0!=a.coordinateY}),o=!0,i=!1,n=void 0;try{for(var l,A=r()(t);!(o=(l=A.next()).done);o=!0){var c=l.value;a=new s.a.Marker(c.id,{src:e("+TI4"),x:c.coordinateX,y:c.coordinateY,offset:{x:-10,y:-10}}),this.markerArr.push(a),this.gMap.mLayer.addMarker(a)}}catch(a){i=!0,n=a}finally{try{!o&&A.return&&A.return()}finally{if(i)throw n}}},makemark:function(a,t,e,o){this.clounmMark&&this.gMap.mLayer.removeMarker(this.clounmMark);var r=new s.a.Marker(e,{src:o,x:a,y:t,offset:{x:-10,y:-10}});this.clounmMark=r,this.gMap.mLayer.addMarker(r)},startmark:function(){this.ismark=!this.ismark,this.specailText="标记";this.gMap.mLayer.removeAllMarkers()},stopmark:function(){this.havepoints&&this.fea.hide(),this.specailText="查看",this.ismark=!this.ismark,this.iscloummark=!this.iscloummark,this.gMap.setMode("pan",new s.a.Style({})),this.markerArr=[],this.getallmark()},getdetails:function(a){this.ismark?(this.iscloummark=!0,this.clounmIndex=a.$index,(a.row.coordinateX||a.row.coordinateY)&&this.makemark(a.row.coordinateX,a.row.coordinateY,a.row.id,this.greenDian),this.fea&&this.fea.hide(),this.imageMaker(a.row.id)):(console.log("查看标记"),(a.coordinateX||a.coordinateY)&&(this.clounmMark&&this.gMap.mLayer.removeMarker(this.clounmMark),this.makemark(a.coordinateX,a.coordinateY,a.id,this.redDian)))},imageMaker:function(a){var t=this,e={strokeColor:"blue",fillColor:"rgb(85,142,213)",opacity:1,pointRadius:10},o={pointRadius:10};this.gMap&&this.gMap.setMode("drawPoint",new s.a.Style(o)),this.gMap.events.on("geometryDrawDone",function(o,r,i){var n=e;console.log("type, points, options",o,r,i),t.clounmMark&&t.gMap.mLayer.removeMarker(t.clounmMark),t.havepoints&&t.fea.hide(),console.log("--points--",r),t.havepoints=r;(new Date).getTime(),(i||{}).radius;t.fea=new s.a.Feature.Point(a,r,{name:"中国"},n),t.gFeatureLayer.addFeature(t.fea),t.updateP(r.x,r.y,a)})},updateP:function(a,t,e){var o=this,r={coordinateX:a,coordinateY:t,detectorId:e};this.$axios.put(this.$api.UpdateDetectorCoordinate,r).then(function(e){console.log("修改点位成功",e),o.tableData[o.clounmIndex].coordinateX=a,o.tableData[o.clounmIndex].coordinateY=t}).catch(function(a){console.log("修改点位失败",a)})},clearMark:function(){}}},A={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"fireAlarmLocationBox"},[e("div",{staticClass:"left"},[e("el-scrollbar",{staticStyle:{height:"100%"}},[e("div",{staticClass:"left_top"},[e("p",[a._v("楼层："+a._s(a.address))]),a._v(" "),a.ismark?e("el-button",{attrs:{type:"danger"},on:{click:a.stopmark}},[a._v("结束标记")]):e("el-button",{attrs:{type:"primary"},on:{click:a.startmark}},[a._v("开始标记点位")])],1),a._v(" "),e("baseTable",{attrs:{tableThead:a.tableThead,tableData:a.tableData,totalCount:a.totalCount,pageSize:10,specailText:a.specailText},on:{showdetails:a.getdetails}})],1)],1),a._v(" "),e("div",{staticClass:"right"},[e("div",{ref:"dv",staticClass:"img",attrs:{id:"dv"}})])])},staticRenderFns:[]};var c=e("VU/8")(l,A,!1,function(a){e("/tEp")},null,null);t.default=c.exports}});
//# sourceMappingURL=11.65cc3a88b7ff683fb12d.js.map