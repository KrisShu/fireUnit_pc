{"version":3,"sources":["webpack:///./src/assets/image/home/green.png","webpack:///./src/assets/image/home/dian.png","webpack:///./src/assets/image/home/dian_active.png","webpack:///src/pages/dataPages/unitInformation/fireAlarmLocation.vue","webpack:///./src/pages/dataPages/unitInformation/fireAlarmLocation.vue?decb","webpack:///./src/pages/dataPages/unitInformation/fireAlarmLocation.vue"],"names":["module","exports","fireAlarmLocation","components","baseTable","data","address","floor_Picture","iscloummark","ismark","imgmark1","clounmIndex","specailText","tableThead","name","prop","prop1","tableData","totalCount","floorId","gFeatureLayer","gMap","havepoints","fea","markerArr","clounmMark","pinkDian","__webpack_require__","greenDian","redDian","created","this","$route","query","floor_id","mounted","GetBitMapSet","methods","_this","$axios","get","$api","params","then","res","console","log","result","architectureName","floorName","bitMapSetDetectorList","init","getallmark","catch","err","ailabel_default","a","Map","zoom","cx","cy","zoomMax","zoomMin","autoPan","drawZoom","gImageLayer","Layer","Image","w","h","zIndex","addLayer","Feature","transparent","marker","newData","filter","item","coordinateX","coordinateY","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","arr","value","Marker","id","src","x","y","offset","push","mLayer","addMarker","return","makemark","dian","removeMarker","startmark","removeAllMarkers","stopmark","hide","setMode","Style","getdetails","items","$index","row","imageMaker","_this2","drawPoint","strokeColor","fillColor","opacity","pointRadius","drawStyle","events","on","type","points","options","featureStyle","Date","getTime","radius","Point","addFeature","updateP","_this3","markObject","detectorId","put","UpdateDetectorCoordinate","clearMark","unitInformation_fireAlarmLocation","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","height","_v","_s","attrs","click","pageSize","showdetails","ref","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"wCAAAA,EAAAC,QAAA,smCCAAD,EAAAC,QAAA,mqCCAAD,EAAAC,QAAA,2jCCsCAC,GACAC,YACAC,YAAA,GAEAC,KAJA,WAKA,OACAC,QAAA,GACAC,cAAA,GACAC,aAAA,EACAC,QAAA,EACAC,UAAA,EACAC,YAAA,EACAC,YAAA,KACAC,aAEAC,KAAA,OACAC,KAAA,aAGAD,KAAA,OACAC,KAAA,aAGAD,KAAA,OACAC,KAAA,aAGAD,KAAA,KACAC,KAAA,cACAC,MAAA,gBAGAF,KAAA,OAGAG,aACAC,WAAA,EACAC,QAAA,GACAC,cAAA,GACAC,KAAA,GACAC,WAAA,GACAC,IAAA,GACAC,aACAC,WAAA,GACAC,SAAAC,EAAA,QACAC,UAAAD,EAAA,QACAE,QAAAF,EAAA,UAGAG,QAjDA,WAmDAC,KAAAZ,QAAAY,KAAAC,OAAAC,MAAAC,UAGAC,QAtDA,WAuDAJ,KAAAK,gBAGAC,SAEAD,aAFA,WAEA,IAAAE,EAAAP,KACAA,KAAAQ,OAAAC,IAAAT,KAAAU,KAAAL,cACAM,QAAAvB,QAAAY,KAAAZ,WACAwB,KAAA,SAAAC,GACAC,QAAAC,IAAA,MAAAF,GACAN,EAAAhC,QAAAsC,EAAAvC,KAAA0C,OAAAC,iBAAAJ,EAAAvC,KAAA0C,OAAAE,UACAX,EAAA/B,cAAAqC,EAAAvC,KAAA0C,OAAAxC,cACA+B,EAAArB,UAAA2B,EAAAvC,KAAA0C,OAAAG,sBAEAZ,EAAAa,OACAb,EAAAc,eACAC,MAAA,SAAAC,GACAT,QAAAC,IAAA,MAAAQ,MAIAH,KAlBA,WAmBApB,KAAAV,KAAA,IAAAkC,EAAAC,EAAAC,IAAA,MAEAC,KAAA,KACAC,GAAA,EACAC,GAAA,EACAC,QAAA,KACAC,QAAA,GACAC,SAAA,EACAC,UAAA,IAIA,IAAAC,EAAA,IAAAV,EAAAC,EAAAU,MAAAC,MAAA,MAAApC,KAAAxB,eAEA6D,EAAA,KACAC,EAAA,MAGAC,OAAA,IAGAvC,KAAAV,KAAAkD,SAAAN,GAEAlC,KAAAX,cAAA,IAAAmC,EAAAC,EAAAU,MAAAM,QAAA,gBAEAF,OAAA,EACAG,aAAA,IAGA1C,KAAAV,KAAAkD,SAAAxC,KAAAX,gBAIAgC,WApDA,WAqDA,IAAAsB,OAAA,EAEAC,EAAA5C,KAAAd,UAAA2D,OAAA,SAAAC,GAAA,UAAAA,EAAAC,aAAA,GAAAD,EAAAE,cAHAC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAIA,QAAAC,EAAAC,EAAAC,IAAAX,KAAAK,GAAAI,EAAAC,EAAAE,QAAAC,MAAAR,GAAA,OAAAS,EAAAL,EAAAM,MACAhB,EAAA,IAAAnB,EAAAC,EAAAmC,OAAAF,EAAAG,IACAC,IAAAlE,EAAA,QACAmE,EAAAL,EAAAX,YACAiB,EAAAN,EAAAV,YACAiB,QAAAF,GAAA,GAAAC,GAAA,MAEAhE,KAAAP,UAAAyE,KAAAvB,GACA3C,KAAAV,KAAA6E,OAAAC,UAAAzB,IAZA,MAAApB,GAAA2B,GAAA,EAAAC,EAAA5B,EAAA,aAAA0B,GAAAK,EAAAe,QAAAf,EAAAe,SAAA,WAAAnB,EAAA,MAAAC,KAeAmB,SAnEA,SAmEAP,EAAAC,EAAAH,EAAAU,GACAvE,KAAAN,YACAM,KAAAV,KAAA6E,OAAAK,aAAAxE,KAAAN,YAEA,IAAAiD,EAAA,IAAAnB,EAAAC,EAAAmC,OAAAC,GACAC,IAAAS,EACAR,IACAC,IACAC,QAAAF,GAAA,GAAAC,GAAA,MAEAhE,KAAAN,WAAAiD,EACA3C,KAAAV,KAAA6E,OAAAC,UAAAzB,IAEA8B,UAhFA,WAiFAzE,KAAAtB,QAAAsB,KAAAtB,OACAsB,KAAAnB,YAAA,KAUAmB,KAAAV,KAAA6E,OAAAO,oBAGAC,SA/FA,WAgGA3E,KAAAT,YACAS,KAAAR,IAAAoF,OAEA5E,KAAAnB,YAAA,KACAmB,KAAAtB,QAAAsB,KAAAtB,OACAsB,KAAAvB,aAAAuB,KAAAvB,YACAuB,KAAAV,KAAAuF,QAAA,UAAArD,EAAAC,EAAAqD,WACA9E,KAAAP,aACAO,KAAAqB,cAEA0D,WA1GA,SA0GAC,GACAhF,KAAAtB,QACAsB,KAAAvB,aAAA,EACAuB,KAAApB,YAAAoG,EAAAC,QAEAD,EAAAE,IAAAnC,aAAAiC,EAAAE,IAAAlC,cAEAhD,KAAAsE,SAAAU,EAAAE,IAAAnC,YAAAiC,EAAAE,IAAAlC,YAAAgC,EAAAE,IAAArB,GAAA7D,KAAAH,WAEAG,KAAAR,KAEAQ,KAAAR,IAAAoF,OAEA5E,KAAAmF,WAAAH,EAAAE,IAAArB,MAGA/C,QAAAC,IAAA,SACAiE,EAAAjC,aAAAiC,EAAAhC,eAEAhD,KAAAN,YACAM,KAAAV,KAAA6E,OAAAK,aAAAxE,KAAAN,YAEAM,KAAAsE,SAAAU,EAAAjC,YAAAiC,EAAAhC,YAAAgC,EAAAnB,GAAA7D,KAAAF,YAMAqF,WAtIA,SAsIAtB,GAAA,IAAAuB,EAAApF,KAEAqF,GAEAC,YAAA,OAAAC,UAAA,kBAAAC,QAAA,EAAAC,YAAA,IAEAC,GAHAD,YAAA,IAIAzF,KAAAV,MAAAU,KAAAV,KAAAuF,QAAA,gBAAArD,EAAAC,EAAAqD,MAAAY,IAEA1F,KAAAV,KAAAqG,OAAAC,GAAA,4BAAAC,EAAAC,EAAAC,GACA,IAAAC,EAAAX,EACAvE,QAAAC,IAAA,wBAAA8E,EAAAC,EAAAC,GACAX,EAAA1F,YACA0F,EAAA9F,KAAA6E,OAAAK,aAAAY,EAAA1F,YAEA0F,EAAA7F,YACA6F,EAAA5F,IAAAoF,OAEA9D,QAAAC,IAAA,aAAA+E,GACAV,EAAA7F,WAAAuG,GACA,IAAAG,MAAAC,WAEAH,OAAAI,OACAf,EAAA5F,IAAA,IAAAgC,EAAAC,EAAAgB,QAAA2D,MAAAvC,EAAAiC,GACA/G,KAAA,MACAiH,GACAZ,EAAA/F,cAAAgH,WAAAjB,EAAA5F,KACA4F,EAAAkB,QAAAR,EAAA/B,EAAA+B,EAAA9B,EAAAH,MAIAyC,QArKA,SAqKAvC,EAAAC,EAAAH,GAAA,IAAA0C,EAAAvG,KACAwG,GACAzD,YAAAgB,EACAf,YAAAgB,EACAyC,WAAA5C,GAEA7D,KAAAQ,OAAAkG,IAAA1G,KAAAU,KAAAiG,yBAAAH,GAAA5F,KAAA,SAAAC,GACAC,QAAAC,IAAA,SAAAF,GAEA0F,EAAArH,UAAAqH,EAAA3H,aAAAmE,YAAAgB,EACAwC,EAAArH,UAAAqH,EAAA3H,aAAAoE,YAAAgB,IACA1C,MAAA,SAAAC,GACAT,QAAAC,IAAA,SAAAQ,MAGAqF,UApLA,eC7FeC,GADEC,OAFjB,WAA0B,IAAAC,EAAA/G,KAAagH,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,yBAAmCF,EAAA,OAAYE,YAAA,SAAmBF,EAAA,gBAAqBG,aAAaC,OAAA,UAAiBJ,EAAA,OAAYE,YAAA,aAAuBF,EAAA,KAAAH,EAAAQ,GAAA,MAAAR,EAAAS,GAAAT,EAAAxI,YAAAwI,EAAAQ,GAAA,KAAAR,EAAA,OAAAG,EAAA,aAAuFO,OAAO5B,KAAA,UAAgBD,IAAK8B,MAAAX,EAAApC,YAAsBoC,EAAAQ,GAAA,UAAAL,EAAA,aAAmCO,OAAO5B,KAAA,WAAiBD,IAAK8B,MAAAX,EAAAtC,aAAuBsC,EAAAQ,GAAA,gBAAAR,EAAAQ,GAAA,KAAAL,EAAA,aAAqDO,OAAO3I,WAAAiI,EAAAjI,WAAAI,UAAA6H,EAAA7H,UAAAC,WAAA4H,EAAA5H,WAAAwI,SAAA,GAAA9I,YAAAkI,EAAAlI,aAA8H+G,IAAKgC,YAAAb,EAAAhC,eAA8B,OAAAgC,EAAAQ,GAAA,KAAAL,EAAA,OAAgCE,YAAA,UAAoBF,EAAA,OAAYW,IAAA,KAAAT,YAAA,MAAAK,OAAkC5D,GAAA,aAEhxBiE,oBCCjB,IAcAC,EAdyBnI,EAAQ,OAcjCoI,CACE7J,EACA0I,GATF,EAVA,SAAAoB,GACErI,EAAQ,SAaV,KAEA,MAUesI,EAAA,QAAAH,EAAiB","file":"static/js/10.2a1f6aeb04557abc438e.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAA0CAYAAAAqunDVAAAAAXNSR0ICQMB9xQAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUATWljcm9zb2Z0IE9mZmljZX/tNXEAAAKXSURBVGje3ZorUMMwGMeRSCQSiZxEIpFwR2G4KQ45OcnUJvqQSCRycnJyhrsdx9IqrrJysrLka7M+k6yP9JGIv+jay/prku+V72w+n5+pJuEDakt0qZlo/GSg91Cm/aVZ9iYRWh3vaTqavOjoapBQ8GL4BacYZosV1JCDtcBjjHqHwi9yh7WrCcKS+2yit86h8Be9CZeSWJginO7ctw6lLb8vwj3SLkxe26r7rvSDD/rPNVn79D+3mrz4HsvmPXPQzN9boVCwDKKBRcNUHA8bIyFQxKoFncti/v7ZCIrMEGVwO+gFlAh8XC0o8Bl4AJ++/juEMJj3xpWgQmdqIq/P2SghH1xLaagGkUHX8l6Xf+cnodj7aAjal7KImQugbiHsESy7uAxxEM2E6s18N7WGlm2xofLGwZJmGWZmKxukSjhLKc2KUJDPDMjBVo9A7A0Nyu3VyYoQziJiKBKBy7z0juZ9EkPBhQpQjyb6iKHCIogKM2WhVTJTOJxXAgqHdwmUidaKQHlpKEcRqCAN5aoH1X65qysdOIZCQscbyUkvv4UiUOu085Uy5Sh8fFJpStfEVQiTpjEUyXgPskNBDJuN0mWLKoqlM5eWeozlmhmbmdLniy6+vFYwOUDI1CggdJckGs//tmMXXqLzWn/Qab1BtXojbjGz6IjlyKG4UGRvDb2OflShkMmrpcvijGdVj3KGEzpRiqpw9lzr0I1pDY3+03baaUcpqHB/9ZZrMX2kS9tHlc58AYzfZrDvCiacoVNAlVoO2t9j/I8DW4G35Oo3h0SHCF7nZptzviukjQfq1cRB+20DwbKv02XWqAWuxVhx3aSjTFxbXHMrKaw9TnwDIxw24HiMQO6YZjm6DzMyFd3IqFyrKegf+8W0n8MAiYAAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/image/home/green.png\n// module id = +TI4\n// module chunks = 10","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAA1CAYAAADh5qNwAAAAAXNSR0ICQMB9xQAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUATWljcm9zb2Z0IE9mZmljZX/tNXEAAALWSURBVGje3VoreMIwEEZOIieRk5OTk5OTyMnJyklQSCQSOYlApAcCOYlE7cPQ1g2JZLk+06Zp0zZtk4ozW0ny5x65++9G8/l8NDRRvuDvfv/gEvLqAlgOkJm3s1dUDrEAfOPfUfC7v+32UUtQeLALIR8UyMYF+15VvB384CW4+/1T76DoTb/QQ5E6QArkdAEy7RwU3mhdrcgLHNE8WweF/oI+InkoRd/YhO47bgUU+k1g+0UHJLW04qBfFX9zptbxrBQULkgX9hrctgq50b3elYDChYIF7Xu3Iros8tUIVBjdbv1pJ3+fsuhY6EP5JgedaswRmSK98EqggijHBwXH7toEC/f1KLCJNCgattd9a0g2E5ECFUY6TQFBjn/BZzmo1jMF5eKhuwhBBdm1UYAiDVpCUHxw0M+PBOe6sakUq6WJmVoKfYuWPhwodLhUZNHf5NKRkBafHCisSk3SDP92wTUKGNFjOzbZ9GIJ66/Q9MjUjACRfXw5bS1iUJj5mggqB+SaAQVLiSTSBFCHGBRGjkH4FK2QE1CZR7evbFxFdcyYn30eiKburE8dBwhKOSGpg0+luTxTfSoqGn1QPlk/CE3BJskofHJ/EKCWiU/53LiRIHLLD6aMt0+mayoqFFluYlGcLGpWeghSpGzlaxg/kU26Ezo6wySlGVndtZUSpguZpccsQ7PzlZBN8pvQHH+uW23FM0nZZjhHZvJVsO4Bg8ykuHR9E1xOSxw7Kwblc4Bw1b/Eh7dK/Sn8gcRN9QnIqtdJFERDp1+TiwmW2j1f0YhBj28YyfOj6t15jkJrzxyLajkkiMoAVZqjCLr02eChGgzU8qFGEy9hl/Es6wflFTSRMWNPFOWUzSah+oNKuarWKpsqDoMsqo7wNJoiC0YS0syuslyO+k6TOcDGs3XhQ201Z6Qwi6E1nYKZP9VTmWPMHdlpTBHrE/5/jc0+1dOZg5ufRfkHecpTNkH4crMAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/image/home/dian.png\n// module id = 0xvg\n// module chunks = 10","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAA0CAYAAAAqunDVAAAAAXNSR0ICQMB9xQAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUATWljcm9zb2Z0IE9mZmljZX/tNXEAAAIvSURBVGje3ZorcIRADIZXnqxEVp6srDxZWYlEVp6sBFV5srISiURUcFVIJBKJRCJpMhOYHV7HY4HNil/d3LLfbJLNJhGe5wnTpHzBXyGsSAgb5KLuQvigSFJQ/wZyQM9aQuHGQFfYcAyqFij9E+IL1ng5HAo28QYbShaCDCmDdT92h4KPvpIpVRsK4d43hwJ/eSIfqXZUPNfv5pzOGW1/Z6BaBXz/ohQKzQAXPgioEQYjJVAU1SqN9LMKik5IJ6D6xNxFUHhnwAKljlAEZs+CwmgDf8x1BSKVeLVMhlqRGeytHK6Z00MoXf1oTkRsX66nDdKezc0Qk+hBKA3D9yRBMnwbhGIQHCadVjtJ5QhU+9ZnBwrfM5yh8NXQgcJUnzlUha+IBooycNZAZIKODOWYAAUu9C1DuSZAYVGngcJ03hCoWIYKDYHKZajUEKhKhmIfzvugIkOgChMDRdpAGZAi1Qrle4rlk+M+UGmSa+ImpEnXBopevIUBUOd2ls49WGR9j0SbeTJ760CRCWpbvJxgepfeGgWm7kyhkrESmcXxtNpt1U4xk+FFHDys0JJvcSmVdQqZYw0CFpexXBab2srRPXXyFzXdNI6GcV+3YxIU+Zdub62sz49m9XwJzNfohCyVIweH+hi6wpjJLR4OoSbC3uG+HOvvKhnjwXo1XdB7ZB7+kimzVSNwG0bHcM1EmcqxuLVRUtl43BYDjNhsCAgyGQrL9DueyFX1IKNxo6aof8N/3wkYTfMoAAAAAElFTkSuQmCC\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/image/home/dian_active.png\n// module id = OQV/\n// module chunks = 10","<template>\n  <div class=\"fireAlarmLocationBox\">\n      <!--<el-row :gutter=\"30\" class=\"row-box\">-->\n        <!--<el-col :span=\"8\">-->\n            <div class=\"left\">\n               <el-scrollbar style=\"height:100%\">\n                <div class=\"left_top\">\n                    <p>楼层：{{address}}</p>\n                    <el-button v-if=\"ismark\"  @click=\"stopmark\" type=\"danger\">结束标记</el-button>\n                    <el-button v-else  @click=\"startmark\" type=\"primary\">开始标记点位</el-button>\n                </div>\n                <baseTable\n                  :tableThead=\"tableThead\"\n                  :tableData=\"tableData\"\n                  :totalCount='totalCount'\n                  :pageSize=\"10\"\n                  :specailText=\"specailText\"\n                  @showdetails=\"getdetails\"\n                >\n                </baseTable>\n               </el-scrollbar>\n            </div>\n\n            <div class=\"right\">\n              \n              <!-- <el-button type=\"primary\" icon=\"el-icon-rank\" plain></el-button> -->\n              <div ref=\"dv\" class=\"img\" id=\"dv\" >\n               \n              </div>\n            </div>\n\n    \n  </div>\n</template>\n\n<script>\nimport baseTable from '../../../components/baseTable/index'\nimport AILabel  from 'ailabel'\nexport default {\n    components:{\n        baseTable\n    },\n    data(){\n        return{\n            address:'',\n            floor_Picture:\"\",\n            iscloummark:false,//一行的\n            ismark:false,\n            imgmark1:false,\n            clounmIndex:0,\n            specailText:\"查看\",\n            tableThead:[\n                {\n                    name:'部件地址',\n                    prop:'identify',\n                },\n                {\n                    name:'部件类型',\n                    prop:'typeName',\n                },\n                {\n                    name:'安装位置',\n                    prop:'location',\n                },\n                {\n                    name:'坐标',\n                    prop:'coordinateX',\n                    prop1:'coordinateY',\n                },\n                {\n                    name:'操作'\n                }\n            ],\n            tableData:[],\n            totalCount:0,\n            floorId:'',\n            gFeatureLayer:'',\n            gMap:'',\n            havepoints:'',\n            fea:'',\n            markerArr:[],\n            clounmMark:'',//\n            pinkDian:require('../../../assets/image/home/dian.png'),\n            greenDian:require('../../../assets/image/home/green.png'),\n            redDian:require('../../../assets/image/home/dian_active.png'),\n        }\n    },\n    created(){\n      \n      this.floorId = this.$route.query.floor_id\n     \n    },\n    mounted(){\n      this.GetBitMapSet();\n      \n    },\n    methods:{\n      //获取列表内容\n      GetBitMapSet(){\n        this.$axios.get(this.$api.GetBitMapSet,{\n          params:{floorId:this.floorId}\n        }).then(res=>{\n          console.log(\"res\",res)\n          this.address = res.data.result.architectureName+res.data.result.floorName\n          this.floor_Picture = res.data.result.floor_Picture;\n          this.tableData = res.data.result.bitMapSetDetectorList\n         \n          this.init();\n          this.getallmark();\n        }).catch(err=>{\n          console.log(\"err\",err)\n        })\n      },\n      //初始化\n      init(){\n         this.gMap = new AILabel.Map('dv',\n          {\n            zoom: 1080, \n            cx: 0, \n            cy: 0, \n            zoomMax: 650 * 10, \n            zoomMin: 650 / 10, \n            autoPan: true, \n            drawZoom: true\n          }\n        );\n        // 图片层实例\\添加\n        const gImageLayer = new AILabel.Layer.Image('img', this.floor_Picture, \n          {\n            w: 1080, \n            h: 720\n          }, \n          {\n            zIndex: 1\n          }\n        );\n        this.gMap.addLayer(gImageLayer);\n        // 矢量层实例\\添加\n        this.gFeatureLayer = new AILabel.Layer.Feature('featureLayer', \n          {\n            zIndex: 2, \n            transparent: true\n          }\n        );\n        this.gMap.addLayer(this.gFeatureLayer);\n \n      },\n      //获取所有标记\n      getallmark(){\n        let marker,\n        that = this;\n        let newData = this.tableData.filter(item =>  item.coordinateX !=0&&item.coordinateY !=0 )\n        for(let arr of newData){\n            marker = new AILabel.Marker(arr.id, {\n              src:require('../../../assets/image/home/green.png'),\n              x: arr.coordinateX,\n              y: arr.coordinateY,\n              offset: {x: -10, y: -10},\n            });\n          this.markerArr.push(marker)\n          this.gMap.mLayer.addMarker(marker);\n        }\n      },\n      makemark(x,y,id,dian){\n        if( this.clounmMark ){//如果存在行mark就要删除\n          this.gMap.mLayer.removeMarker(this.clounmMark)\n        }\n          let  marker = new AILabel.Marker(id, {\n              src:dian,\n              x: x,\n              y: y,\n              offset: {x: -10, y: -10},\n          });\n          this.clounmMark = marker\n          this.gMap.mLayer.addMarker(marker);\n      },\n      startmark(){\n        this.ismark =!this.ismark;\n        this.specailText = '标记';\n        let marker,\n        that = this;\n        // if( this.clounmMark ){\n        //   this.gMap.mLayer.removeMarker(this.clounmMark)\n        // }\n        \n        // for(let arr of this.markerArr){\n        //   that.gMap.mLayer.removeMarker(arr);\n        // }\n        this.gMap.mLayer.removeAllMarkers();//删除所有标记\n       \n      },\n      stopmark(){\n        if(this.havepoints){//点击结束标记隐藏已有点\n          this.fea.hide()\n        }\n        this.specailText = '查看'\n        this.ismark =!this.ismark;\n        this.iscloummark =!this.iscloummark;\n        this.gMap.setMode('pan', new AILabel.Style({}));//使图片放弃标点行为，转换为平移图片事件\n        this.markerArr =[]\n        this.getallmark();\n      },\n      getdetails(items){\n        if(this.ismark){//开始标记点位\n            this.iscloummark = true;\n            this.clounmIndex = items.$index;\n           \n            if(items.row.coordinateX || items.row.coordinateY ){\n              //如果当前table行存在标记点那就要生成一个和标记点相同坐标的Mark\n              this.makemark(items.row.coordinateX,items.row.coordinateY,items.row.id,this.greenDian)\n            }\n            if(this.fea){\n              //当之前已经在图片上标记是在点击标记按钮时，清除之前的标记点\n              this.fea.hide()\n            }\n            this.imageMaker(items.row.id);\n            \n        }else{\n          console.log(\"查看标记\")\n            if(items.coordinateX || items.coordinateY ){\n              //如果当前table行存在标记点那就要生成一个和标记点相同坐标的Mark\n              if(this.clounmMark){\n                this.gMap.mLayer.removeMarker(this.clounmMark)\n              }\n              this.makemark(items.coordinateX,items.coordinateY,items.id,this.redDian)\n            }\n\n\n        } \n      },\n      imageMaker(id){\n\n            let drawPoint ={\n                drawStyle: {pointRadius: 10},\n                featureStyle: {strokeColor: 'blue', fillColor: 'rgb(85,142,213)', opacity: 1, pointRadius: 10}\n            }\n            let drawStyle = drawPoint.drawStyle;\n            this.gMap && this.gMap.setMode('drawPoint', new AILabel.Style(drawStyle));\n            \n            this.gMap.events.on('geometryDrawDone', (type, points, options)=> {\n               const featureStyle = drawPoint.featureStyle;\n              console.log(\"type, points, options\",type, points, options)\n              if(this.clounmMark){//删除行Mark\n                this.gMap.mLayer.removeMarker(this.clounmMark);\n              }\n              if(this.havepoints){//隐藏已有点\n                this.fea.hide()\n              }\n              console.log('--points--', points);\n              this.havepoints = points\n              const timestamp = new Date().getTime();\n             \n              const {radius = 10} = options || {};\n              this.fea = new AILabel.Feature.Point(id, points, {\n                  name: '中国'\n              }, featureStyle);\n              this.gFeatureLayer.addFeature(this.fea);\n              this.updateP(points.x,points.y,id)\n            })\n\n      },\n      updateP(x,y,id){\n        let markObject ={\n              coordinateX:x,\n              coordinateY:y,\n              detectorId:id\n        };\n        this.$axios.put(this.$api.UpdateDetectorCoordinate,markObject).then(res=>{\n          console.log(\"修改点位成功\",res)\n\n          this.tableData[this.clounmIndex].coordinateX = x;\n          this.tableData[this.clounmIndex].coordinateY = y;\n        }).catch(err=>{\n          console.log(\"修改点位失败\",err)\n        })\n      },\n      clearMark(){\n\n      }\n    \n\n          \n    }\n}\n</script>\n\n<style lang=\"less\">\n    .fireAlarmLocationBox{\n        padding: 10px;\n        width: 100%;\n        height: 100%;\n        box-sizing: border-box;\n        color: white;\n        .left{\n            position: absolute;\n            width:35%;\n            height:100%;\n            top:0;\n            left:0;\n            padding:20px;\n            box-sizing:border-box;\n            .left_top{\n                display: flex;\n                align-items: center;\n                p{\n                    margin-right: 40px;\n                }\n            }\n        }\n        .right{\n          position: absolute;\n          width:65%;\n          height:100%;\n          top:0;\n          right:0;\n          padding:20px;\n          box-sizing:border-box;\n          border: 2px solid rgb(0, 132, 255);\n            #dv{\n               \n              width: 100%;         // 必须\n              height: 100%;        // 必须\n              position: relative;   // 必须\n              cursor: pointer;\n        \n            }\n            img{\n                width:100%;\n                height:100%;\n            }\n            \n            \n            #markerLayer{\n              img{\n                width: 20px;\n                height: 20px;\n              }\n            }\n        }\n        .dd{\n            border-radius: 8px;\n        }\n        .hoverp{\n          width: 200px;\n          height: 50px;\n          background: white;\n          color:darkcyan;\n          position: absolute;\n          left: 50px;\n\n        }\n    }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/dataPages/unitInformation/fireAlarmLocation.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fireAlarmLocationBox\"},[_c('div',{staticClass:\"left\"},[_c('el-scrollbar',{staticStyle:{\"height\":\"100%\"}},[_c('div',{staticClass:\"left_top\"},[_c('p',[_vm._v(\"楼层：\"+_vm._s(_vm.address))]),_vm._v(\" \"),(_vm.ismark)?_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.stopmark}},[_vm._v(\"结束标记\")]):_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.startmark}},[_vm._v(\"开始标记点位\")])],1),_vm._v(\" \"),_c('baseTable',{attrs:{\"tableThead\":_vm.tableThead,\"tableData\":_vm.tableData,\"totalCount\":_vm.totalCount,\"pageSize\":10,\"specailText\":_vm.specailText},on:{\"showdetails\":_vm.getdetails}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('div',{ref:\"dv\",staticClass:\"img\",attrs:{\"id\":\"dv\"}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-33103e49\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/dataPages/unitInformation/fireAlarmLocation.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-33103e49\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./fireAlarmLocation.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./fireAlarmLocation.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./fireAlarmLocation.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-33103e49\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./fireAlarmLocation.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/dataPages/unitInformation/fireAlarmLocation.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}