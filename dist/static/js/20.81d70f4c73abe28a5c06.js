webpackJsonp([20],{XzfG:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("mvHQ"),r=o.n(a),i=o("Nn1j"),l=o("HR9O"),s={components:{baseTable:i.a,baseDialog:l.a},data:function(){return{loading:!1,tableData:[],tableThead:[{name:"设备地址",prop:"deviceAddress"},{name:"监控类型",prop:"monitorType"},{name:"安装位置",prop:"location"},{name:"状态",prop:"state"},{name:"当前数值",prop:"currentValue"},{name:"操作"}],piepNetworkPage:{fireUnitId:localStorage.getItem("fireUnitID"),SkipCount:0,MaxResultCount:10},rules:{deviceAddress:[{required:!0,message:"请填写设备地址",trigger:"change"}]},totalCount:0,FireWaterDeviceTypes:[],piepNetworkForm:{monitorType:1,enableCloudAlarm:!0,minThreshold:"0.5",maxThreshold:"10"},piepNetworkForm_add:{monitorType:1,enableCloudAlarm:!0,minThreshold:"0.5",maxThreshold:"10"}}},created:function(){this.GetFireWaterDeviceList(),this.GetFireWaterDeviceModels()},methods:{GetFireWaterDeviceList:function(){var e=this;this.loading=!0,this.$axios.get(this.$api.GetFireWaterDeviceList,{params:this.piepNetworkPage}).then(function(t){console.log("GetFireWaterDeviceListtable列表",t),e.loading=!1;var o=t.data.result;e.tableData=o.items,e.totalCount=o.totalCount,0==t.data.result.items.length&&t.data.result.totalCount>0&&(e.piepNetworkPage.SkipCount=0,e.GetFireWaterDeviceList())}).catch(function(e){console.log("GetFireWaterDeviceListtable列表失败",e)})},GetFireWaterDeviceModels:function(){var e=this;this.$axios.get(this.$api.GetFireWaterDeviceModels,{params:{}}).then(function(t){console.log("GetFireWaterDeviceModels",t),e.FireWaterDeviceTypes=t.data.result}).catch(function(e){console.log("GetFireWaterDeviceTypeserr",e)})},addNew:function(){this.$refs.pipeNetworkDialog.dialogVisible=!0;var e=r()(this.piepNetworkForm_add);this.piepNetworkForm=JSON.parse(e)},addupdate_Sbumit:function(){var e=this;console.log(localStorage.getItem("fireUnitID")),this.$refs.form.validate(function(t){t&&(e.piepNetworkForm.fireUnitId=localStorage.getItem("fireUnitID"),console.log("提交",e.piepNetworkForm),(e.piepNetworkForm.id?e.$axios.put(e.$api.UpdateFireWaterDevice,e.piepNetworkForm):e.$axios.post(e.$api.AddFireWaterDevice,e.piepNetworkForm)).then(function(t){console.log("新增或者修改成功",t),e.$message.success((e.piepNetworkForm.id?"修改":"新增")+"消防管网成功"),e.$refs.pipeNetworkDialog.dialogVisible=!1,e.GetFireWaterDeviceList()}).catch(function(t){console.log("新增或者修改失败",t),e.$message.error(""+t.error.message)}))})},cancel:function(e){if(e)this.$refs.pipeNetworkDialog.dialogVisible=!1;else{var t=r()(this.piepNetworkForm_add);this.piepNetworkForm=JSON.parse(t)}},GetFireWaterDeviceById:function(e){var t=this;console.log("查看详情",e),this.$refs.pipeNetworkDialog.dialogVisible=!0;var o=e.id;this.$axios.get(this.$api.GetFireWaterDeviceById,{params:{deviceId:o}}).then(function(e){console.log("查看详情成功",e),t.piepNetworkForm=e.data.result}).catch(function(e){console.log("查看详情失败",e)})},DeleteFireWaterDevice:function(e){var t=this;console.log("删除的id",e);var o=e.id;this.$axios.delete(this.$api.DeleteFireWaterDevice,{params:{deviceId:o}}).then(function(e){console.log("删除成功",e),t.$message({message:"删除数据成功",type:"success"}),t.GetFireWaterDeviceList()}).catch(function(e){console.log("删除数据失败",e)})},closeDialog:function(){this.$refs.form.resetFields()},Prev_next:function(e){this.piepNetworkPage.SkipCount=(e-1)*this.piepNetworkPage.MaxResultCount,this.GetFireWaterDeviceList()}}},p={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pipeNetworkBox"},[o("div",{staticClass:"topBox"},[o("el-button",{on:{click:e.addNew}},[e._v("新增")])],1),e._v(" "),o("baseTable",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",tableThead:e.tableThead,tableData:e.tableData,totalCount:e.totalCount,pageSize:10},on:{deleteInfo:e.DeleteFireWaterDevice,showdetails:e.GetFireWaterDeviceById,pageChange:e.Prev_next}}),e._v(" "),o("baseDialog",{ref:"pipeNetworkDialog",staticClass:"pipeNetworkDialog",attrs:{title:"消防设备信息"},on:{closeDialog:e.closeDialog}},[o("el-form",{ref:"form",staticClass:"formBox",attrs:{rules:e.rules,model:e.piepNetworkForm,"label-width":"80px"}},[o("el-row",{staticClass:"baseBox",attrs:{gutter:20}},[o("el-col",{staticClass:"left_box",attrs:{span:4}},[o("div",{staticClass:"grid-content basetitle"},[e._v("基本")])]),e._v(" "),o("el-col",{attrs:{span:20}},[o("div",{staticClass:"grid-content"},[o("el-row",{staticClass:"pd20",attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"设备地址",prop:"deviceAddress"}},[o("el-input",{attrs:{placeholder:"请选填写设备地址"},model:{value:e.piepNetworkForm.deviceAddress,callback:function(t){e.$set(e.piepNetworkForm,"deviceAddress",t)},expression:"piepNetworkForm.deviceAddress"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[e.piepNetworkForm.id?o("p",{staticClass:"marginleft10"},[e._v("\n                                    设备状态：\n                                    "),2==e.piepNetworkForm.state?o("span",{staticStyle:{color:"rgb(59, 218, 11)"}},[e._v("良好")]):e._e(),e._v(" "),-2==e.piepNetworkForm.state?o("span",{staticStyle:{color:"#F56C6C"}},[e._v("超限")]):e._e(),e._v(" "),-1==e.piepNetworkForm.state?o("span",{staticStyle:{color:"#ccc"}},[e._v("离线")]):e._e()]):e._e()])],1),e._v(" "),o("el-row",{staticClass:"margin20 pd20"},[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"安装位置"}},[o("el-input",{attrs:{placeholder:"请输入设备型号"},model:{value:e.piepNetworkForm.location,callback:function(t){e.$set(e.piepNetworkForm,"location",t)},expression:"piepNetworkForm.location"}})],1)],1)],1)],1)])],1),e._v(" "),o("el-row",{staticClass:"baseBox",attrs:{gutter:20}},[o("el-col",{staticClass:"left_box",attrs:{span:4}},[o("div",{staticClass:"grid-content basetitle"},[e._v("联网网关")])]),e._v(" "),o("el-col",{attrs:{span:20}},[o("div",{staticClass:"grid-content"},[o("el-row",{staticClass:"pd20",attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"设备型号",prop:"gateway_Model"}},[o("el-select",{attrs:{placeholder:"请选择设备型号"},model:{value:e.piepNetworkForm.gateway_Model,callback:function(t){e.$set(e.piepNetworkForm,"gateway_Model",t)},expression:"piepNetworkForm.gateway_Model"}},e._l(e.FireWaterDeviceTypes,function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"设备编号",prop:"gateway_Sn"}},[o("el-input",{attrs:{placeholder:"请填写设备编号"},model:{value:e.piepNetworkForm.gateway_Sn,callback:function(t){e.$set(e.piepNetworkForm,"gateway_Sn",t)},expression:"piepNetworkForm.gateway_Sn"}})],1)],1)],1),e._v(" "),o("el-row",{staticClass:"pd20"},[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"安装位置"}},[o("el-input",{attrs:{placeholder:"请输入网关安装位置"},model:{value:e.piepNetworkForm.gateway_Location,callback:function(t){e.$set(e.piepNetworkForm,"gateway_Location",t)},expression:"piepNetworkForm.gateway_Location"}})],1)],1)],1),e._v(" "),o("el-row",{staticClass:"pd20",attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"通讯方式",prop:"gateway_NetComm"}},[o("el-select",{attrs:{placeholder:"请选择通讯方式"},model:{value:e.piepNetworkForm.gateway_NetComm,callback:function(t){e.$set(e.piepNetworkForm,"gateway_NetComm",t)},expression:"piepNetworkForm.gateway_NetComm"}},[o("el-option",{attrs:{label:"以太网",value:"以太网"}}),e._v(" "),o("el-option",{attrs:{label:"WIFI",value:"WIFI"}}),e._v(" "),o("el-option",{attrs:{label:"NB-IOT",value:"NB-IOT"}}),e._v(" "),o("el-option",{attrs:{label:"4G",value:"4G"}})],1)],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[e.piepNetworkForm.gateway_DataRate?o("p",{staticClass:"marginleft10"},[e._v("数据采集频率："+e._s(e.piepNetworkForm.gateway_DataRate))]):o("p",{staticClass:"marginleft10"},[e._v("数据采集频率：2小时")])])],1)],1)])],1),e._v(" "),o("el-row",{staticClass:"baseBox",attrs:{gutter:20}},[o("el-col",{staticClass:"left_box",attrs:{span:4}},[o("div",{staticClass:"grid-content basetitle"},[e._v("参数")])]),e._v(" "),o("el-col",{attrs:{span:20}},[o("div",{staticClass:"grid-content"},[o("el-row",{staticClass:"pd20"},[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"监测类型",prop:""}},[o("el-radio",{attrs:{label:1},model:{value:e.piepNetworkForm.monitorType,callback:function(t){e.$set(e.piepNetworkForm,"monitorType",t)},expression:"piepNetworkForm.monitorType"}},[e._v("液位")])],1)],1),e._v(" "),1==e.piepNetworkForm.monitorType?o("el-col",{attrs:{span:18}},[o("div",{staticClass:"range_box"},[o("span",[e._v("监测范围:")]),e._v(" "),o("el-input",{model:{value:e.piepNetworkForm.minThreshold,callback:function(t){e.$set(e.piepNetworkForm,"minThreshold",t)},expression:"piepNetworkForm.minThreshold"}},[o("template",{slot:"append"},[e._v("m")])],2),e._v(" "),o("p",[e._v("—")]),e._v(" "),o("el-input",{model:{value:e.piepNetworkForm.maxThreshold,callback:function(t){e.$set(e.piepNetworkForm,"maxThreshold",t)},expression:"piepNetworkForm.maxThreshold"}},[o("template",{slot:"append"},[e._v("m")])],2)],1)]):e._e()],1),e._v(" "),o("el-row",{staticClass:"pd20"},[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"  ",prop:""}},[o("el-radio",{attrs:{label:2},model:{value:e.piepNetworkForm.monitorType,callback:function(t){e.$set(e.piepNetworkForm,"monitorType",t)},expression:"piepNetworkForm.monitorType"}},[e._v("水压")])],1)],1),e._v(" "),2==e.piepNetworkForm.monitorType?o("el-col",{attrs:{span:18}},[o("div",{staticClass:"range_box"},[o("span",[e._v("监测范围:")]),e._v(" "),o("el-input",{model:{value:e.piepNetworkForm.minThreshold,callback:function(t){e.$set(e.piepNetworkForm,"minThreshold",t)},expression:"piepNetworkForm.minThreshold"}},[o("template",{slot:"append"},[e._v("MPa")])],2),e._v(" "),o("p",[e._v("—")]),e._v(" "),o("el-input",{model:{value:e.piepNetworkForm.maxThreshold,callback:function(t){e.$set(e.piepNetworkForm,"maxThreshold",t)},expression:"piepNetworkForm.maxThreshold"}},[o("template",{slot:"append"},[e._v("MPa")])],2)],1)]):e._e()],1),e._v(" "),o("el-row",{staticClass:"pd20"},[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"超限动作",prop:""}},[o("el-checkbox",{model:{value:e.piepNetworkForm.enableCloudAlarm,callback:function(t){e.$set(e.piepNetworkForm,"enableCloudAlarm",t)},expression:"piepNetworkForm.enableCloudAlarm"}},[e._v("云端报警")])],1)],1)],1)],1)])],1),e._v(" "),o("el-row",{staticClass:"btns"},[o("el-button",{on:{click:e.addupdate_Sbumit}},[e._v("提交")]),e._v(" "),o("el-button",{staticClass:"cancel",on:{click:function(t){return e.cancel(e.piepNetworkForm.id)}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var n=o("VU/8")(s,p,!1,function(e){o("ZRT3")},null,null);t.default=n.exports},ZRT3:function(e,t){}});
//# sourceMappingURL=20.81d70f4c73abe28a5c06.js.map